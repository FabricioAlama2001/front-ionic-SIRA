<ion-content>
  <div class="container">
    <div class="panel">
      <label>Recuperar Contraseña</label>
      <!-- 📌 Logo -->
      <img src="/assets/images/pages/auth/login/logo_login.png" class="logo" alt="Logo">

      <ion-list [formGroup]="form">

        <!-- 🚀 Paso 1: Ingresar Usuario o Correo -->
        <div [hidden]="isCodeSent">
          <label>Número de Identificación:</label>
          <ion-item>
            <ion-input placeholder="Número de Cédula" formControlName="username"></ion-input>
          </ion-item>
          <ion-button expand="full" (click)="sendVerificationCode()">Enviar Cédula</ion-button>
        </div>

        <!-- 🚀 Paso 2: Ingresar Código de Verificación -->
        <div [hidden]="!isCodeSent || isCodeValid">
          <label>Código de Verificación:</label>
          <ion-item>
            <ion-input type="text" formControlName="code" placeholder="Ingrese el código recibido"></ion-input>
          </ion-item>
          <ion-button expand="full" (click)="verifyCode()">Verificar Código</ion-button>
        </div>

        <!-- 🚀 Paso 3: Ingresar Nueva Contraseña -->
        <div [hidden]="!isCodeValid">
          <label>Nueva Contraseña:</label>
          <ion-item>
            <ion-input type="password" formControlName="newPassword" placeholder="Ingrese su nueva contraseña"></ion-input>
          </ion-item>
          <ion-button expand="full" (click)="updatePassword()">Actualizar Contraseña</ion-button>
        </div>

        <ion-button expand="full" fill="outline" (click)="goBack()">
          <ion-icon name="arrow-back-outline" slot="start"></ion-icon>
          Regresar
        </ion-button>

      </ion-list>

    </div>
  </div>

  <!-- 📌 Alertas -->
  <ion-alert
    [isOpen]="errorAlert"
    header="Error"
    message="{{ errorMessage }}"
    [buttons]="['Aceptar']"
    (didDismiss)="errorAlert = false">
  </ion-alert>

  <ion-alert
    [isOpen]="successAlert"
    header="Éxito"
    message="{{ successMessage }}"
    [buttons]="['Aceptar']"
    (didDismiss)="successAlert = false">
  </ion-alert>

</ion-content>
